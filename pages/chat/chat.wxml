<view class="page-wrap">
<view class = "navigation1">
    <view class="navigation">
        <view class="GroupAvatars" bindtap="kindToggle">
            <block wx:for-items="{{list}}" wx:key="{{item.id}}">
                 <image class="kind-list-img" src="{{item.url}}"></image>
                </block>
        </view>

        <swiper indicator-dots="{{indicatorDots}}" autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}">
             <block wx:for-items="{{list}}" wx:key="{{item.id}}">
                    <swiper-item>
                        <image class="kind-list-img"  src="{{item.url}}"></image>
                    </swiper-item>
                </block>
        </swiper>
    </view>
    <view class="showAvatars {{show ? 'show-Avatars':''}}">
        <view class="navigator-box {{show ? 'navigator-box-show':''}}">
             <block wx:for-items="{{list}}" wx:key="{{item.id}}">
                <view id="{{item.id}}" class="detailInfo" bindtap="chatPerson">
                    <image class="personAvatar" src="{{item.url}}"  ></image>
                    <text class="personName">{{item.nickName}}</text> 
                </view>
            </block>
        </view>
           
    </view>
</view>

<swiper indicator-dots="{{indicatorDots}}" autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}">
             <block wx:for-items="{{list}}" wx:key="{{item.id}}">
                    <swiper-item>
                        <image class="kind-list-img"  src="{{item.url}}"></image>
                    </swiper-item>
                </block>
        </swiper>

    <scroll-view class="chat-container" scroll-y scroll-into-view="{{lastMessageId}}" scroll-top="9999999999">
        <view wx:for="{{messages}}" wx:for-item="message" wx:key="id" id="{{message.id}}" class="message {{message.type}}">
            <view wx:if="{{message.type == 'speak'}}" class="user-message {{message.isMe ? 'me' : 'other'}}">
                <image class="avatar" src="{{message.user.avatarUrl}}" ></image>
               <view class="textContainer"> 
                <view class="text">
                    <view class="nickname">{{message.user.nickName}}</view>
                    <view class="content">{{message.content}}</view>
                </view>
                </view>
            </view>
            <view wx:if="{{message.type == 'system'}}" class="system-message">
                {{message.content}}
            </view>
        </view>
    </scroll-view>
    <view class="input-panel">
        <image class="pic-icon" src="../materials/clip-icon.png" style="width:60rpx;height:44rpx"></image>
        <input auto-focus type="text" value="{{inputContent}}" bindchange="changeInputContent" class="send-input"></input>
        <button class ="send-btn" bindtap="sendMessage">
            <image src="../materials/send2.png" style="width:65rpx;height:65rpx"></image>
        </button>
    </view>
</view>